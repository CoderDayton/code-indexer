# =============================================================================
# CODE INDEXER MCP SERVER - ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains all available environment variables for the Code Indexer
# MCP Server. Copy this file to .env and customize the values as needed.

# =============================================================================
# QDRANT VECTOR DATABASE CONFIGURATION
# =============================================================================
# Qdrant is used for storing and searching vector embeddings

# For cloud instance (recommended for production)
QDRANT_URL=https://your-instance.cloud.qdrant.io:6333
QDRANT_API_KEY=your_api_key_here
QDRANT_HTTPS=true
QDRANT_TIMEOUT=30000
QDRANT_RETRIES=3

# For local development (uncomment to use local Qdrant)
# QDRANT_URL=http://localhost:6333
# QDRANT_API_KEY=
# QDRANT_HTTPS=false

# =============================================================================
# OLLAMA CONFIGURATION
# =============================================================================
# Ollama is used for generating embeddings via the embedding model

OLLAMA_HOST=http://localhost:11434
OLLAMA_TIMEOUT=30000
OLLAMA_RETRIES=3

# Alternative Ollama hosts
# OLLAMA_HOST=http://192.168.1.100:11434  # Remote Ollama instance
# OLLAMA_HOST=https://your-ollama-api.com # Cloud Ollama service

# =============================================================================
# EMBEDDING MODEL CONFIGURATION
# =============================================================================
# nomic-embed-text-v1.5 supports variable dimensions (64-768) with Matryoshka learning

# Model selection (use the exact model name from Ollama)
OLLAMA_MODEL=nomic-embed-text:v1.5

# Embedding dimensions - nomic-embed-text-v1.5 supports 64 to 768 dimensions
# Higher dimensions = better quality but more storage/compute
# 768 = Full model performance (recommended for best quality)
# 512 = Good balance of performance and efficiency
# 256 = Efficient for large-scale deployments
# 128 = Very efficient for memory-constrained environments
EMBEDDING_DIMENSIONS=768

# Text chunking configuration
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Alternative embedding models (if available in your Ollama)
# OLLAMA_MODEL=bge-large-en-v1.5
# EMBEDDING_DIMENSIONS=1024
#
# OLLAMA_MODEL=all-MiniLM-L6-v2
# EMBEDDING_DIMENSIONS=384

# =============================================================================
# DIRECTORY CONFIGURATION
# =============================================================================
# Base directory for indexing (auto-detected from VSCode workspace if not set)
# BASE_DIRECTORY=/path/to/your/project

# VSCode workspace detection (automatically set by VSCode)
# VSCODE_WORKSPACE=/path/to/workspace.code-workspace

# =============================================================================
# FILE WATCHING CONFIGURATION
# =============================================================================
# Control which files to watch and ignore patterns

IGNORE_PATTERNS=node_modules/**,*.git/**,dist/**,build/**,*.log,*.tmp,**/*.test.ts,**/__tests__/**,.env,.kilocode/**,.github/**,coverage/**,*.d.ts,package-lock.json,yarn.lock
DEBOUNCE_MS=1000
WATCH_ENABLED=true

# Additional ignore patterns for specific frameworks
# React/Next.js: .next/**,out/**,build/**
# Vue/Nuxt: .nuxt/**,dist/**,.output/**
# Python: __pycache__/**,*.pyc,venv/**,.venv/**
# Java: target/**,*.class,*.jar
# C#: bin/**,obj/**,*.dll,*.exe

# =============================================================================
# INDEXING CONFIGURATION
# =============================================================================
# Control indexing behavior and performance

BATCH_SIZE=10
MAX_CONCURRENCY=5
ENABLE_INCREMENTAL_INDEXING=true
PERSIST_METADATA=true
VALIDATION_ENABLED=true

# Performance tuning options:
# For slower systems: MAX_CONCURRENCY=3, BATCH_SIZE=5
# For faster systems: MAX_CONCURRENCY=10, BATCH_SIZE=20
# For memory constrained: BATCH_SIZE=3, MAX_CONCURRENCY=2

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Control logging output and levels

LOG_LEVEL=info
LOG_FILE_PATH=./logs/indexer.log
ENABLE_CONSOLE_LOGGING=true

# Available log levels: debug, info, warn, error
# debug = Very verbose, all operations logged
# info = Normal operation logging (recommended)
# warn = Only warnings and errors
# error = Only errors

# =============================================================================
# COLLECTION CONFIGURATION
# =============================================================================
# Qdrant collection settings

COLLECTION_NAME=code_index

# Alternative collection names for different projects
# COLLECTION_NAME=frontend_code
# COLLECTION_NAME=backend_code
# COLLECTION_NAME=docs_index

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================
# Advanced settings (usually don't need to change)

# State file for incremental indexing
# STATE_FILE_PATH=./.indexer-state.json

# Maximum log file size and rotation
# MAX_LOG_FILE_SIZE=10485760
# MAX_LOG_FILES=5

# Custom chunk processing
# ENABLE_SMART_CHUNKING=true
# MIN_CHUNK_SIZE=100
# MAX_CHUNK_SIZE=2000

# =============================================================================
# USAGE EXAMPLES
# =============================================================================
#
# High Performance Setup (for powerful machines):
# EMBEDDING_DIMENSIONS=768
# MAX_CONCURRENCY=10
# BATCH_SIZE=20
# CHUNK_SIZE=1500
#
# Efficiency Setup (for resource-constrained environments):
# EMBEDDING_DIMENSIONS=256
# MAX_CONCURRENCY=3
# BATCH_SIZE=5
# CHUNK_SIZE=800
#
# Development Setup (for local testing):
# QDRANT_URL=http://localhost:6333
# LOG_LEVEL=debug
# ENABLE_CONSOLE_LOGGING=true
# MAX_CONCURRENCY=2
#
# Production Setup (for live deployment):
# QDRANT_URL=https://your-cloud-instance.qdrant.io:6333
# QDRANT_API_KEY=your_production_key
# LOG_LEVEL=warn
# ENABLE_CONSOLE_LOGGING=false
# LOG_FILE_PATH=/var/log/code-indexer/indexer.log